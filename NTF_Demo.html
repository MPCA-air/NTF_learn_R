<!DOCTYPE html>
<html>
  <head>
    <title>R Demo | NTFAQ</title>
    <meta charset="utf-8">
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/leaflet/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet/leaflet.js"></script>
    <link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
    <script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
    <script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding/leaflet.js"></script>
    <link rel="stylesheet" href="css\xari_style.css" type="text/css" />
    <link rel="stylesheet" href="css\fade.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R Demo | NTFAQ
## <span style="display:block; text-align:center;"><img src="https://pbs.twimg.com/media/DNhps0gUQAAcS55.jpg" width="620"></span>

---



class: inverse

# How can I analyze my data?

&lt;br&gt;

--

## ...and not want to throw my computer in the lake?

--

## ...the same way as you do?

--

## ...and be able to check my answers?

## ...and remember what I did 2 years ago?


--

## ...while you're sleeping?


---
class: inverse

# .scary[R training is coming this Fall...]



&lt;img src='http://lazerhorse.org/wp-content/uploads/2013/06/Old-Horror-Films-Retro-Film-Posters-The-Brain-Eaters.jpg' width="88%"&gt;

---
class: middle, center

.work[__THIS IS A TRUE STORY__]


&lt;br&gt;

.fade[
The __events__ depicted took place in __Minnesota__ in 2015. Dates and locations may have changed to protect the innocent. The rest is told __exactly__ as it occurred.
]



---
class: white, center
background-image: url("http://blogs.reed.edu/datablog/files/2015/09/RStudio-Ball.png")
background-position: 50% 50%
background-size: 87%


.lower[.center-text[
# is community sourced
]]


---

&lt;div style="margin-top: -20px;"&gt;
.center[![:scale 72%](images\rladies_map.gif)]
&lt;/div&gt;

People all around the world contribute to and maintain R. A main focus is making it friendlier and easier to use. 

Imagine 1,000's of graduate students, non-profits, scientists, and data enthusiasts all working to provide you with tools to help analyze and visualize your data. 

.center[This is happening __RIGHT NOW__.]


---
class: center, middle


# Top 10 reasons to use R


&lt;br&gt;

The following slides contain our 10 favorite things about R.



---

# 1| Dynamic tools


[![:scale 100%](images/pollution_rose_1.png)](https://air-data.shinyapps.io/Metro_shiny_roses/)


.work[It all started with a [Pollution Rose](https://air-data.shinyapps.io/Metro_shiny_roses/).]


---
class: middle


&lt;div class="note"&gt;

Soooo, we were hooked. &lt;br&gt;&lt;br&gt;

We began learning R and we were no longer at the whims of changing budgets because...

&lt;/div&gt;

&lt;br&gt;&lt;strong&gt;&lt;i&gt;...Drum roll please...&lt;/strong&gt;&lt;/i&gt;&lt;br&gt;





---

# 2| **R is FREE!**

--

__Let's install R.__ [Click here!](https://mpca-air.github.io/NTF_learn_R/00_Install.html)

__You can download R right now. We will wait.__


--

&lt;div class="note"&gt; Ok, but how does R work?&lt;/div&gt;

R lets you perform data analysis like you're writing a recipe for chocolate chip cookies. Once you've written your favorite recipe you can use it over and over again or share it with your favorite collaborators and grandkids. 

.center[![:scale 95%](images\recipe_to_cookie.png)]

---

# A data recipe 

&lt;br&gt;

### __Summarized air data__

.smalltext[
_Servings: 1 to 10_
]

1. Read the monitoring data in from AQS

2. Look at a plot of the data.

3. Remove the bad data.

4. Make an even better plot of the data.

5. Summarize the data.

6. Save the results.

---

# Our story Begins


&lt;img src="images\business_cat.jpg" align="right" style="margin-left: 40px; margin-right: -28px; margin-top: -10px; max-width: 54%; width: 54%" /&gt;

__It's your first day on the job.__ 

_And you've got new data._

--

You are given a laptop with one folder on it. In the folder is a single Excel file. Shortly after sitting down you receive a phone call. The person on the other end of the phone tells you that the data set isn't complete and will be updated on a weekly basis. Also, there is a potential need for weekly data analysis updates.

_(You think briefly about your brother who sells ice cream on a beach and wonder what that would be like)._  

__MISSION IMPOSSIBLE begins.__ 


---
class: inverse, center, middle

![:scale 10%](https://windowsfileviewer.com/images/types/xlsx.png)

.bigtext[We've got data.] 

--
&lt;br&gt;
.bigtext[Now how do we get it into R?]

--
&lt;br&gt;&lt;br&gt;
_I don't know._ 

--
&lt;br&gt;&lt;br&gt;
__Let's Google it!__


---


![:scale 55%](images\google_readxl.png)



---

# 3| There's a new package waiting for you


When someone shares their analysis recipe or new tool in R, they wrap everything together into a __package__. Packages in R are like Apps for your phone -- you load them each time you want to do something special.



&lt;img src="https://www.rstudio.com/wp-content/uploads/2017/05/readxl-400x464.png" width="345" align="left" style="margin-right: 40px; margin-top: 10px;"&gt;

&lt;br&gt;

Since this data is stored in an Excel file we can load the __readxl__ package, which gives R the power to read data from Excel. 



```r
install.packages("readxl")
```


```r
library(readxl)
```


```r
data &lt;- read_excel("data.xlsx", sheet = "2014")
```


---

# Package stickers 


__readxl__ is only one of many helpful R packages out there. Here's a sample of our favorites.

We have lots of stickers and you should take some with you. Many are for a variety of R communities.

&lt;img src="https://i.pinimg.com/736x/e6/50/80/e650804e9948b5b8b9c231285a576f1b--gears-stickers.jpg" width="345" align="center" style="margin-right: 40px; margin-top: 10px;"&gt;



---


# 4| Read all kinds of data

These packages give R the ability to read data in from almost any place it might be stored. R can talk to SQL databases, read data saved from other statistical software, or pull data directly from the internet.

--

### R can talk data with:

- AirNow

--

- AQS

--

- NOAA

--

- Dropbox

--

- FTP sites

--

- SQL databases

--

- .scary[ZIP files, large text files, modeling output]


--

__Let's try it.__



---

# Back at our day job. 

First take a gander at the data. It's sitting online [HERE](https://github.com/MPCA-air/NTF_learn_R/raw/master/data/Hourly/AQS_1hr_FondduLac.xlsx).

--

Now load the Excel data into R:

`1.` Download the file:

```r
download.file("https://github.com/MPCA-air/NTF_learn_R/raw/master/data/Hourly/AQS_1hr_FondduLac.xlsx", "AQS_FondduLac.xlsx", mode = "wb")
```

`2.` Read the __2014__ tab:

```r
data_2014 &lt;- read_excel("AQS_FondduLac.xlsx", sheet = "2014")
```


`3.` Read the __2015__ tab:

```r
data_2015 &lt;- read_excel("AQS_FondduLac.xlsx", sheet = "2015")
```


---

# 5| Read all the rows

What if you have a ** _HUGE_ ** file? 

&lt;br&gt;

Good timing! We just requested MET data from the weather people down the hall, and they sent us a text file with over million rows of data. 

That's nice of them, but _don't they know_ Excel is limited to around a million rows?

---

## We will open it.

Here's what we do to read a large text file:


`1.` Download the file:

```r
url &lt;- "https://github.com/MPCA-air/NTF_learn_R/raw/master/data/BIG_MET_data.zip"

download.file(url, "BIG_MET_data.zip")

# It's a zip file, so we can run the unzip() function
unzip("BIG_MET_data.zip", file = "MET_data_2012-2017.csv")
```


```r
install.packages("readr")
```


`2.` Read the data with __ ` read_csv() ` __:

```r
# Inside the ZIP file is a huge csv text file.
# For this we can run read_csv() from the readr package.
# This package has lots of data reading functions.

library(readr)

big_met &lt;- read_csv("MET_data_2012-2017.csv")
```




---

# Did it work?


### Let's count the rows.

```r
nrow(big_met)
```

```
## [1] 1401457
```


We can look at the data in a couple of ways:

```r
# This package has lots of data processing functions.
install.packages("dplyr")
```



---

# `glimpse()` the data


```r
library(dplyr)

glimpse(big_met)
```

```
## Observations: 1,401,457
## Variables: 17
## $ time                &lt;dttm&gt; 2013-09-20 05:00:00, 2013-09-20 06:00:00,...
## $ summary             &lt;chr&gt; "Clear", "Clear", "Clear", "Clear", "Clear...
## $ icon                &lt;chr&gt; "clear-night", "clear-night", "clear-night...
## $ precipIntensity     &lt;dbl&gt; 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0....
## $ precipProbability   &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, ...
## $ temperature         &lt;dbl&gt; 63.95, 62.88, 60.98, 60.71, 60.42, 58.60, ...
## $ apparentTemperature &lt;dbl&gt; 63.95, 62.88, 60.98, 60.71, 60.42, 58.60, ...
## $ dewPoint            &lt;dbl&gt; 58.59, 54.82, 54.73, 54.68, 54.62, 54.61, ...
## $ humidity            &lt;dbl&gt; 0.83, 0.75, 0.80, 0.81, 0.81, 0.87, 0.89, ...
## $ windSpeed           &lt;dbl&gt; 7.80, 8.93, 8.32, 10.57, 7.19, 7.34, 7.29,...
## $ windBearing         &lt;int&gt; 281, 265, 272, 262, 264, 255, 254, 245, 26...
## $ visibility          &lt;dbl&gt; 9.92, 9.94, 10.00, 10.00, 10.00, 10.00, 10...
## $ cloudCover          &lt;dbl&gt; 0.00, 0.02, 0.00, 0.00, 0.00, 0.00, 0.00, ...
## $ pressure            &lt;dbl&gt; 1008.50, 1008.76, 1008.76, 1008.97, 1009.1...
## $ precipType          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "r...
## $ precipAccumulation  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...
## $ site_catid          &lt;chr&gt; "27-003-1002", "27-003-1002", "27-003-1002...
```

&lt;br&gt;

---

# `summary()` of all columns


```r
summary(big_met)
```

```
##       time                       summary              icon          
##  Min.   :2011-12-31 07:00:00   Length:1401457     Length:1401457    
##  1st Qu.:2013-04-30 21:00:00   Class :character   Class :character  
##  Median :2014-08-30 12:00:00   Mode  :character   Mode  :character  
##  Mean   :2014-09-10 09:28:39                                        
##  3rd Qu.:2016-01-02 21:00:00                                        
##  Max.   :2018-01-01 05:00:00                                        
##                                                                     
##  precipIntensity   precipProbability  temperature     apparentTemperature
##  Min.   :0.00000   Min.   :0.00000   Min.   :-37.14   Min.   :-56.83     
##  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.: 28.13   1st Qu.: 20.73     
##  Median :0.00000   Median :0.00000   Median : 45.97   Median : 42.39     
##  Mean   :0.00212   Mean   :0.04188   Mean   : 44.31   Mean   : 40.24     
##  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.: 63.53   3rd Qu.: 63.57     
##  Max.   :8.51830   Max.   :1.00000   Max.   :103.23   Max.   :110.73     
##  NA's   :143       NA's   :143       NA's   :1        NA's   :1          
##     dewPoint         humidity        windSpeed      windBearing   
##  Min.   :-44.08   Min.   :0.0900   Min.   : 0.00   Min.   :  0.0  
##  1st Qu.: 20.59   1st Qu.:0.6000   1st Qu.: 4.60   1st Qu.:131.0  
##  Median : 35.60   Median :0.7500   Median : 7.18   Median :199.0  
##  Mean   : 34.71   Mean   :0.7159   Mean   : 8.08   Mean   :200.9  
##  3rd Qu.: 53.05   3rd Qu.:0.8500   3rd Qu.:10.68   3rd Qu.:291.0  
##  Max.   : 80.50   Max.   :1.0000   Max.   :48.93   Max.   :359.0  
##  NA's   :30       NA's   :30       NA's   :2137    NA's   :4756   
##    visibility       cloudCover        pressure       precipType       
##  Min.   : 0.010   Min.   :0.00     Min.   : 973.1   Length:1401457    
##  1st Qu.: 9.400   1st Qu.:0.00     1st Qu.:1010.6   Class :character  
##  Median :10.000   Median :0.08     Median :1015.8   Mode  :character  
##  Mean   : 9.077   Mean   :0.22     Mean   :1016.0                     
##  3rd Qu.:10.000   3rd Qu.:0.31     3rd Qu.:1021.1                     
##  Max.   :10.000   Max.   :1.00     Max.   :1054.9                     
##  NA's   :163      NA's   :166379   NA's   :2644                       
##  precipAccumulation  site_catid       
##  Length:1401457     Length:1401457    
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
## 
```

---

# ` filter() ` to a single site



```r
library(knitr)

# The filter() function is in the package dplyr
fonddulac_met &lt;- filter(big_met, site_catid == "27-017-7417")


kable(head(fonddulac_met, 5), 'html')
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; time &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; summary &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; icon &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; precipIntensity &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; precipProbability &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; temperature &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; apparentTemperature &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; dewPoint &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; humidity &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; windSpeed &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; windBearing &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; visibility &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cloudCover &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; pressure &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; precipType &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; precipAccumulation &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; site_catid &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 2014-05-06 05:00:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Clear &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; clear-night &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.97 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 32.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.85 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1018.44 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27-017-7417 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 2014-05-06 06:00:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Clear &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; clear-night &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.94 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31.58 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33.58 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 77 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.04 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1018.52 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27-017-7417 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 2014-05-06 07:00:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Clear &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; clear-night &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34.29 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33.68 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.98 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.92 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 86 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1018.14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27-017-7417 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 2014-05-06 08:00:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Clear &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; clear-night &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.71 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.82 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33.51 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.92 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.23 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 97 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1017.80 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27-017-7417 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 2014-05-06 09:00:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Clear &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; clear-night &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.56 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29.96 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33.33 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.74 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.65 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.00 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1017.73 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27-017-7417 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

# 6| Join related data tables with 1 line

Since our concentration data has the same format and only the year is changing, we can bind the two tables together with the function `bind_rows()`.


```r
air_data &lt;- bind_rows(data_2015, data_2014)
```


```r
install.packages("lubridate")
```


```r
# Format the dates for both tables
library(lubridate)

air_data$date_time &lt;-  paste(ymd(air_data$Date), hms(paste(air_data$Hour, ":00:00")))

air_data$date_time &lt;-  ymd_hms(air_data$date_time)

fonddulac_met$time &lt;- ymd_hms(fonddulac_met$time)

fonddulac_met$site_catid &lt;- NULL
```


---

We can `left_join()` the weather and concentration data by the __date__ column in each table.


```r
air_met &lt;- left_join(air_data, fonddulac_met, by = c("date_time" = "time"))
```

_We didn't join on site identification codes because the sites in the MET and AQS data have different IDs._


Here's what the first few rows look like.

```r
library(knitr)

kable(head(select(air_met, -date_time, -Time, -icon), 1), 'html')
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; StateCode &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CountyCode &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SiteNum &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Latitude &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Longitude &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Hour &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Conc &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; site_catid &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Year &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; summary &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; precipIntensity &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; precipProbability &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; temperature &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; apparentTemperature &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; dewPoint &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; humidity &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; windSpeed &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; windBearing &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; visibility &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cloudCover &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; pressure &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; precipType &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; precipAccumulation &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7417 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46.71369 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -92.51172 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2015-04-01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.037 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27-017-7417 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2015 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Partly Cloudy &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 32.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 24.17 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 30.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.91 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.62 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 87 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9.71 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1014.14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;





---

# 7| Documentation and transparency


.indent[
## **To do list**

1. Analyze data
2. ?
3. ??
]

Documentation is hard work and much of my documentation looks like the above list. But in R, I have written each step into a text file script and __voila!__ There's documentation for myself and others.

&lt;div class="tip"&gt;

.pad-right[
You are encouraged to copy and share analyses and charts with others.

It's especially fun to copy yourself from 2 years ago.
]
&lt;/div&gt;



---

# 8| You can't break your data

&lt;div class="quiz"&gt;

.work[
## Pop Quiz, hotshots!  

&lt;br&gt;
&lt;strong&gt;Which of these things have we done?&lt;/strong&gt;&lt;br&gt;
&lt;i&gt;(Hint: It may be more than one of them.)&lt;/i&gt;
]


&lt;input type="radio"&gt; Lost a data file. &lt;br&gt;
&lt;input type="radio"&gt; Accidently replaced a value in Excel with a random letter like 'z'. &lt;br&gt; 
&lt;input type="radio"&gt; Forgotten which file housed the original data. &lt;br&gt; 
&lt;input type="radio"&gt; Saved over something important. &lt;br&gt; 
&lt;input type="radio"&gt; Lost an entire folder of data.  &lt;br&gt;
&lt;input type="radio"&gt; Forgotten which monitoring days I dropped and why. &lt;br&gt;

&lt;/div&gt;


---

# 8| You can't break your data


So far we have joined a table of MET data with concentration data, and the original data files have not been changed. The raw data is still safe.

When we receive updated data we can run the same script to append the data and proceed with our analysis.


You will notice that when we're in R, we always use a name for the data and then tell R to do something to the named object.

It looks like this:


```r
data &lt;- read_excel("data.csv")
```

These R commands always act on a **copy** of the data and aren't changing the original file. So no more worries! 

To look at subsets of data or to store summary results we can create copies of things in the R environment, all without creating lots of different copies of the data.



---

# 8| You can't break your data

If you want to create data from scratch, give the value a name. 


Let's make some values for the temperature and this conference.

```r
current_temp &lt;- 70

this_conference &lt;- "NTFAQ"
```

&lt;br&gt;

Now when we type the names into the R console it will tell us what is stored there.

Hey R, what's the `current_temp`?


```r
current_temp
```

```
## [1] 70
```



---

# 9| Missing values

Let's look at a `summary()` for PM2.5 concentrations and wind speed.



```r
# The summary() function provides min, max, means, etc of each numeric variable in the data set.
# It also tells us what each column type is, letting you know whether the data is
# stored as characters, integers, decimals, or date objects.

select(air_met, Conc, windSpeed) %&gt;% summary()
```

```
##       Conc           windSpeed     
##  Min.   :0.00000   Min.   : 0.000  
##  1st Qu.:0.01900   1st Qu.: 3.920  
##  Median :0.02600   Median : 6.500  
##  Mean   :0.02632   Mean   : 7.093  
##  3rd Qu.:0.03400   3rd Qu.: 9.490  
##  Max.   :0.07500   Max.   :28.010  
##                    NA's   :1043
```

You can see the mean of the "Conc" column and we see no missing values.

If we look at the summary for wind speed, we see many missing values (shown as ` NA ` in R).
We need to know this. We don't want to take means of data where most of it is missing. Other programs may ignore these values, or throw an error at you.

---

# 9| Missing values


&lt;div class="note"&gt;
But I only want one number. Is that too much to ask!?
&lt;/div&gt;


```r
# The summarize() function reduces your data down to a statistical summary
# mean(), max(), min(), percentile(), range(), etc.

fonddulac_mean &lt;- summarize(air_met, mean_pm25 = mean(Conc, na.rm = TRUE))

fonddulac_mean
```


Okay, here's your answer _(if we drop all the `NAs`)_.

The average PM2.5 concentration is:  __.scary[.bigtext[0.026 _ug/m3_]]__



---

# 10| Any plot for any data

![:scale 66%](https://datasciencedojo.com/wp-content/uploads/12_R-and-GGPLOT2-01-845x321.png)

&lt;br&gt;

The _ggplot2_ package has functions that can make almost any plot you can think of. It can also layer plots on top of each other to add multiple elements.


```r
install.packages("ggplot2")
```

__The fun can start now.__ <i class="fas  fa-rocket fa-spin "></i>



---
class: inverse

# The classic `geom_bar()` plot

```r
library(ggplot2)

ggplot(data = air_met, aes(x = site_catid, y = Conc)) +
   geom_bar(stat = "identity")
```

&lt;img src="NTF_Demo_files/figure-html/unnamed-chunk-30-1.png" width="450px" height="410px" /&gt;

It looks like one mean might be higher than the other, but we can't really tell until we can see more of the data.

---

# Box plots


```r
ggplot(data = air_met, aes(x = site_catid, y = Conc)) +
geom_boxplot()
```

&lt;img src="NTF_Demo_files/figure-html/unnamed-chunk-31-1.png" width="450px" height="380px" /&gt;

---

# More box plots

Let's add some color and __ALL 25,000__ of the original data points.


```r
ggplot(data = air_met, aes(x = site_catid, y = Conc, fill = site_catid)) +
   geom_boxplot() +
   geom_jitter(alpha = 0.04)
```

&lt;img src="NTF_Demo_files/figure-html/unnamed-chunk-32-1.png" width="460px" height="360px" /&gt;



---

# Calendar plot


```r
install.packages("openair")
```


```r
library(openair)

air_met &lt;- air_met %&gt;% rename(date = Date,
                              Concentration = Conc)

# openair requires dates to be stored under field name "date"

calendarPlot(air_met, 
             pollutant = "Concentration", 
             statistic = "mean", 
             year      = 2015, 
             annotate  = "value", 
             digits    = 1, 
             key.footer= "ug/m3", 
             main = "Daily Average PM2.5 Concentrations in Fond du Lac, 2015")
```


---

# beeswarm



```r
install.packages("ggbeeswarm")
```


```r
library(ggbeeswarm)

ggplot(air_met, aes(y = site_catid, x = Concentration)) + 
    geom_quasirandom(groupOnX = F) +   
    labs(title = "PM2.5 Result (ug/m^3)")
```

```
## Error in FUN(X[[i]], ...): object 'Concentration' not found
```

![](NTF_Demo_files/figure-html/unnamed-chunk-36-1.png)&lt;!-- --&gt;


---

# Time series
 

 

```r
filter(data_2014, SiteNum == 7417) %&gt;% group_by(Date) %&gt;% 
  summarize(Conc = median(Conc, na.rm = T)) %&gt;% 
  ggplot(aes(x = as.Date(Date), y = Conc, na.rm = T)) + 
         geom_line(size = 1, color = "tomato", alpha = 0.8) +
         geom_point(alpha = 0.5) + geom_smooth() +
         ylab("Concentration (ug/m3)") + xlab("") + ggtitle("PM2.5 at Fond du Lac in 2014") + 
         geom_label(aes(x = as.Date("2014-06-14"), y = 0.0527), fill = "#3C989E", 
                    label = "May 25th: the BIG EVENT", size = 10) 
```

![](NTF_Demo_files/figure-html/unnamed-chunk-38-1.png)&lt;!-- --&gt;

---

# Time series - _split by hour_


```r
filter(data_2014, SiteNum == 7417) %&gt;%
  ggplot(aes(x = Hour, y = Conc)) +
         geom_point(alpha = 0.5) +
         geom_smooth() +
         ylab("Concentration (ug/m3)") + xlab("HOUR") + ggtitle("PM2.5 at Fond du Lac in 2014") +
         facet_wrap(~month(Date, label = T), ncol = 4)
```

![](NTF_Demo_files/figure-html/unnamed-chunk-39-1.png)&lt;!-- --&gt;


---

# Time series - _split by weekday_

```r
filter(data_2014, SiteNum == 7417) %&gt;% 
  mutate(color = ifelse(wday(Date) == 5 &amp; month(Date) == 4, "Clustered day", "Normal day")) %&gt;%
  ggplot(aes(x = wday(Date, label = T), y = Conc)) +
    geom_boxplot(aes(fill = color), outlier.alpha = 0, show.legend = F) + 
    geom_jitter(alpha = 0.2) +
    ylab("Concentration (ug/m3)") + xlab("") + ggtitle("PM2.5 at Fond du Lac in 2014") + 
    facet_wrap(~month(Date, label = T), ncol = 4)
```

![](NTF_Demo_files/figure-html/unnamed-chunk-40-1.png)&lt;!-- --&gt;




---
class: inverse, middle, center

# ...Chart finale...

---

# A calming nature journal



```r
library(ggpomological)

nature_plot &lt;- ggplot(data_2014, aes(x = Date, y = Conc)) +
                 geom_point(aes(color = as.factor(month(Date)), fill = as.factor(month(Date))), alpha = 0.8) + 
                 scale_color_pomological() + scale_fill_pomological() + 
                 theme_pomological_fancy() +
                 labs(title = "Air monitoring results") + theme(legend.position = "none")

paint_pomological(nature_plot, res = 120, width = 1200, height = 400)
```

&lt;img src="NTF_Demo_files/figure-html/unnamed-chunk-42-1.png" width="1600" height="410px" /&gt;

---

# 10.5|  R gives you a language for data

It's nice to have words. 



1. Let's describe going from data in a __wide__ format to data in a __tall__ format as gather().





```r
library(tidyr)

long_met &lt;- big_met %&gt;% gather(Parameter, Result, -time, -summary, -icon, -site_catid)

view(long_met)
```

---
# The reverse is spread().

```r
wide_met &lt;- long_met %&gt;% spread(Parameter, Result)

view(wide_met)
```
---


# 11| Automate - _update with new data_

__Explosions!__

.center[
![:scale 70%](images\explosion.jpg)
]


There was a big refinery explosion close to our monitoring site. We'll be receiving new monitoring data in the next hour. We need to let people know if anything suggests smoke from the explosion is reaching the air monitor.

---

# 1| Automate - _update with new data_


We have data for 2014 and 2015, but the explosion just happened now _(in the year 2016)_. Remember our data is stored in one Excel workbook. Since we wrote this in a script form we can change the date in our `read_excel()` to __2016__.


```r
#download.file("https://github.com/MPCA-air/NTF_learn_R/raw/master/data/Hourly/AQS_1hr_FondduLac.xlsx", "AQS_Fonddulac.xlsx", mode = "wb")

data_2016 &lt;- read_excel("AQS_Fonddulac.xlsx", sheet = "2016")
```


We changed the _year_ and __BOOM!__ we've got updated data.

---

# Update the charts and roses

Now we can follow the same steps we used before to bind the tables togehter and join the MET data.



```r
air_data &lt;- bind_rows(data_2016, air_data)
```



Then we join the met data:

```r
# Set date formats
air_data$date_time &lt;-  paste(ymd(air_data$Date), hms(paste(air_data$Hour, ":00:00")))

air_data$date_time &lt;-  ymd_hms(air_data$date_time)

# Join
air_met &lt;- left_join(air_data, fonddulac_met, by = c("date_time" = "time")) %&gt;% select(-Time)
```


```r
# View table
head(air_met, 2)
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; StateCode &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CountyCode &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SiteNum &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Latitude &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Longitude &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Hour &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Conc &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; site_catid &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Year &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; date_time &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; summary &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; icon &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; precipIntensity &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; precipProbability &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; temperature &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; apparentTemperature &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; dewPoint &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; humidity &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; windSpeed &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; windBearing &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; visibility &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cloudCover &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; pressure &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; precipType &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; precipAccumulation &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 137 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7417 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46.71369 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -92.51172 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2016-01-01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27-137-7417 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2016 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 27 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 137 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7417 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46.71369 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; -92.51172 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2016-01-01 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27-137-7417 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2016 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2016-01-01 01:00:00 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Partly Cloudy &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; partly-cloudy-night &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.55 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.97 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.77 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.19 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 260 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.21 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.31 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1018.85 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

# 12| Make maps and never get lost again

Where is the Fond du Lac monitor again? 

Was it close to the explosion? 

--

Let's take a look.





```r
library(leaflet)

# Reduce the table to a single row for each monitoring site
air_sites &lt;- group_by(air_met, site_catid) %&gt;% slice(1) %&gt;% filter(SiteNum != 7001)

# Quick interactive map
leaflet(data = air_sites) %&gt;%
   addTiles() %&gt;%
   addCircleMarkers(label = ~as.character(SiteNum), 
              labelOptions = labelOptions(noHide = T))
```

&lt;br&gt;

__Go-Go gadget leaflet!__



---

# 12| Make maps and never get lost again

&lt;br&gt;


```
## Assuming "Longitude" and "Latitude" are longitude and latitude, respectively
```

<div id="htmlwidget-bcb5118d69c971474c04" style="width:77%;height:504px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-bcb5118d69c971474c04">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[46.713694,46.713694,46.77107,46.81826,46.743657],[-92.511722,-92.511722,-92.11732,-92.08936,-92.165998],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,null,["7417","7417","7549","7550","7554"],{"interactive":false,"permanent":true,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[46.713694,46.81826],"lng":[-92.511722,-92.08936]}},"evals":[],"jsHooks":[]}</script>

---

# 12| Make maps and never get lost again

#### Let's add where we are right now.

--


```r
# Label our location
leaflet(data = air_sites) %&gt;% addTiles() %&gt;%
  addCircleMarkers(label = ~as.character(SiteNum), labelOptions = labelOptions(noHide = T)) %&gt;%
  addPopups(-92.48, 46.66, "&lt;a&gt;You are HERE&lt;/a&gt;")
```

<div id="htmlwidget-e6da96b5f788808b2462" style="width:77%;height:390px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e6da96b5f788808b2462">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[46.713694,46.713694,46.77107,46.81826,46.743657],[-92.511722,-92.511722,-92.11732,-92.08936,-92.165998],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,null,["7417","7417","7549","7550","7554"],{"interactive":false,"permanent":true,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPopups","args":[46.66,-92.48,"<a>You are HERE<\/a>",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"className":""}]}],"limits":{"lat":[46.66,46.81826],"lng":[-92.511722,-92.08936]}},"evals":[],"jsHooks":[]}</script>


---



# Return of the roses

Remember the first pollutant rose we looked at? Let's load the Fond du Lac data set into the tool to see if the refinery explosion could have potentially impacted the PM2.5 concentrations.

[Pollution rose for any data](https://air-data.shinyapps.io/pollution-roses/)


---

# 13| Online community + Us + You


.bigtext[**Join the R community**]

.float-left[
![:scale 93%](https://pbs.twimg.com/profile_images/611535712710729728/ZrqMrN21_400x400.jpg)
]

.float-right[

- #### `#rstats` Twitter
- #### Local R User groups
- #### Online courses and blogs: Coursera, Data Camp, Kaggle
- #### R conferences _(all types of data)_
- #### RLadies Global

.center[
![:scale 90%](https://k-roz.com/img/rladies-dashboard.png)
]

]


---

# 14| It will compliment you

There are some _just for fun_ R packages. 



_cowsay_ outputs a variety of animals saying the quotes of your choice.


```r
library(cowsay)
say("Meowww. You deserve a break.", "cat")
```

```
## 
##  -------------- 
## Meowww. You deserve a break. 
##  --------------
##     \
##       \
##         \
##             |\___/|
##           ==) ^Y^ (==
##             \  ^  /
##              )=*=(
##             /     \
##             |     |
##            /| | | |\
##            \| | |_|/\
##       jgs  //_// ___/
##                \_)
## 
```



---

# Congratulations! 

&lt;img src="https://assets.wired.com/photos/w_2048/wp-content/uploads/2015/02/catinbox_simba_by-jacme31.jpg" width="61%" align="right" style="margin-left: 35px; max-width: 64%" /&gt;

You've completed the Super fast R Intro and are ready for Day 1 of R Camp. 

In the mean time you can find help on _R-Bloggers_, download the package _swirl_, Google R related questions, or take this [Coursera](https://www.coursera.org/specializations/jhu-data-science) course.


There's also an R intro for __pirates__. If you are a pirate you can sail the high seas [Here](http://tryr.codeschool.com/).

We want to meet you. Come talk to us. Send us an e-mail. 

We are  [Kristie.Ellickson@state.mn.us]() and [Dorian.Kvale@state.mn.us]()

We like __R__. We aren't computer scientists and you don't need to be either.


---

# Back to GitHub

&lt;br&gt;&lt;hr&gt;&lt;br&gt;&lt;br&gt;


This presentation was made with `Rmarkdown` and Yihui's ` xaringan ` package. 

Return to the project's [GitHub page](https://github.com/MPCA-air/NTF_learn_R).




&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;hr&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="css/macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "15:9",
"slideNumberFormat": "",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
